name: Build and Publish

on:
  push:
    branches:
    - 'stable'
    - 'alpha'

jobs:
  publish:
    needs: build
    steps:
    - name: Publish NetCord
      run: dotnet nuget push NetCord/**.nupkg --api-key ${{ secrets.NUGET_API_KEY }} --source https://api.nuget.org/v3/index.json --no-symbols --skip-duplicate

    - name: Publish NetCord.Services
      run: dotnet nuget push NetCord.Services/**.nupkg --api-key ${{ secrets.NUGET_API_KEY }} --source https://api.nuget.org/v3/index.json --no-symbols --skip-duplicate
      
env:
    OriginalTurboBoat: ${{ secrets.ORIGINALTURBOBOAT }}